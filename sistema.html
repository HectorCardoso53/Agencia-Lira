<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Navega√ß√£o -Ag√™ncia Lira</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="waves-decoration"></div>

    <div class="container">
        <header>
            <div class="header-top">
                <div class="header-brand">
                    <img src="img/logo.png" alt="Logo Ag√™ncia Lira" class="header-logo">
                    <div class="header-text">
                        <h1>AG√äNCIA LIRA</h1>
                        <p class="subtitle">Gest√£o Completa de Passagens e Encomendas</p>
                    </div>
                </div>


                <button class="btn btn-logout" onclick="logout()">üö™ Sair</button>
            </div>
            <nav class="nav-tabs">
                <button class="tab-btn active" onclick="showTab('dashboard', this)">üìä Dashboard</button>
                <button class="tab-btn" onclick="showTab('passagens', this)">üé´ Passagens</button>
                <button class="tab-btn" onclick="showTab('encomendas', this)">üì¶ Encomendas</button>
                <button class="tab-btn" onclick="showTab('relatorios', this)">üìà Relat√≥rios</button>
            </nav>
        </header>
        <!-- DASHBOARD -->
        <div id="dashboard" class="content-section active">

            <!-- üîµ M√âTRICAS PRINCIPAIS -->
            <div class="stats-grid main-metrics">

                <div class="stat-card destaque">
                    <div class="stat-label">Receita Total</div>
                    <div class="stat-value" id="totalGeral">R$ 0,00</div>
                </div>

                <div class="stat-card destaque">
                    <div class="stat-label">Comiss√£o Total</div>
                    <div class="stat-value" id="totalComissao">R$ 0,00</div>
                </div>

                <div class="stat-card destaque">
                    <div class="stat-label">Lucro L√≠quido</div>
                    <div class="stat-value" id="lucroLiquido">R$ 0,00</div>
                </div>

                <div class="stat-card destaque">
                    <div class="stat-label">Receita do M√™s</div>
                    <div class="stat-value" id="receitaMes">R$ 0,00</div>
                </div>

            </div>


            <!-- ‚ö™ M√âTRICAS SECUND√ÅRIAS -->
            <div class="stats-grid secondary-metrics">

                <div class="stat-card small">
                    <div class="stat-label">Ticket M√©dio</div>
                    <div class="stat-value" id="ticketMedio">R$ 0,00</div>
                </div>

                <div class="stat-card small">
                    <div class="stat-label">Passagens Ativas</div>
                    <div class="stat-value" id="totalPassagens">0</div>
                </div>

                <div class="stat-card small">
                    <div class="stat-label">Canceladas</div>
                    <div class="stat-value" id="totalCanceladas">0</div>
                </div>

                <div class="stat-card small">
                    <div class="stat-label">Encomendas</div>
                    <div class="stat-value" id="totalEncomendas">0</div>
                </div>

            </div>


            <!-- üìä GR√ÅFICOS -->
            <div class="graficos-grid">
                <div class="grafico-card">
                    <h3>Distribui√ß√£o Receita</h3>
                    <canvas id="graficoResumo"></canvas>
                </div>

                <div class="grafico-card">
                    <h3>Evolu√ß√£o Receita</h3>
                    <canvas id="graficoEvolucaoDashboard"></canvas>
                </div>
            </div>

        </div>

        <!-- PASSAGENS -->
        <div id="passagens" class="content-section">
            <div class="card">
                <h2>Nova Passagem</h2>
                <form id="formPassagem">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Nome do Passageiro *</label>
                            <input type="text" id="nomePassageiro" required>
                        </div>
                        <div class="form-group">
                            <label>CPF</label>
                            <input type="text" id="cpfPassageiro" placeholder="000.000.000-00" maxlength="14"
                                inputmode="numeric">
                        </div>
                        <div class="form-group">
                            <label>Data de Nascimento</label>
                            <input type="date" id="dataNascimento">
                        </div>
                        <div class="form-group">
                            <label>Telefone</label>
                            <input type="tel" id="telefone" placeholder="(00) 00000-0000" maxlength="15"
                                inputmode="numeric">
                        </div>
                        <div class="form-group">
                            <label>Embarque *</label>
                            <select id="embarque" required>
                                <option value="">Selecione...</option>
                                <option value="MANAUS">MANAUS</option>
                                <option value="ORIXIMIN√Å">ORIXIMIN√Å</option>
                                <option value="PARINTINS">PARINTINS</option>
                                <option value="SANTAR√âM">SANTAR√âM</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Destino *</label>
                            <select id="destino" required>
                                <option value="">Selecione...</option>
                                <option value="MANAUS">MANAUS</option>
                                <option value="ORIXIMIN√Å">ORIXIMIN√Å</option>
                                <option value="PARINTINS">PARINTINS</option>
                                <option value="SANTAR√âM">SANTAR√âM</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>N√∫mero do Bilhete *</label>
                            <input type="text" id="bilhete" required>
                        </div>
                        <div class="form-group">
                            <label>Valor (R$) *</label>
                            <input type="text" id="valorPassagem" placeholder="R$ 0,00" inputmode="numeric" required>

                        </div>
                        <div class="form-group">
                            <label>Data da Viagem *</label>
                            <input type="date" id="dataViagem" required>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button type="submit" class="btn">üíæ Salvar Passagem</button>
                        <button type="button" class="btn btn-secondary" onclick="limparFormPassagem()">üîÑ
                            Limpar</button>
                    </div>
                </form>
            </div>

            <div class="card">
                <h2>Lista de Passagens</h2>
                <div class="filter-section">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Filtrar por Data</label>
                            <input type="date" id="filtroDataPassagem" onchange="filtrarPassagens()">
                        </div>
                        <div class="form-group">
                            <label>Filtrar por Status</label>
                            <select id="filtroStatusPassagem" onchange="filtrarPassagens()">
                                <option value="">Todos</option>
                                <option value="ATIVO">Ativo</option>
                                <option value="CANCELADO">Cancelado</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Bilhete</th>
                                <th>Passageiro</th>
                                <th>CPF</th>
                                <th>Embarque</th>
                                <th>Destino</th>
                                <th>Data Viagem</th>
                                <th>Valor</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="passagensBody">
                            <tr>
                                <td colspan="9" style="text-align: center; color: var(--text-light);">Nenhuma passagem
                                    cadastrada</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- ENCOMENDAS -->
        <div id="encomendas" class="content-section">
            <div class="card">
                <h2>Nova Encomenda</h2>
                <form id="formEncomenda">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Destinat√°rio *</label>
                            <input type="text" id="destinatario" required>
                        </div>
                        <div class="form-group">
                            <label>Remetente</label>
                            <input type="text" id="remetente">
                        </div>
                        <div class="form-group">
                            <label>N√∫mero do Bilhete</label>
                            <input type="text" id="bilheteEncomenda">
                        </div>
                        <div class="form-group">
                            <label>Local da Viagem *</label>
                            <select id="localViagem" required>
                                <option value="">Selecione...</option>
                                <option value="SACO">SACO</option>
                                <option value="POR√ÉO">POR√ÉO</option>
                                <option value="GELO">GELO/FRIGOR√çFICO</option>
                                <option value="Dest. Duplo">DESTINO DUPLO</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Esp√©cie *</label>
                            <input type="text" id="especie" placeholder="Ex: 01 ENV.C/ DOC." required>
                        </div>
                        <div class="form-group">
                            <label>Telefone</label>
                            <input type="tel" id="telefoneEncomenda">
                        </div>
                        <div class="form-group">
                            <label>Quantidade de Volumes *</label>
                            <input type="number" id="quantVolumes" min="1" value="1" required>
                        </div>
                        <div class="form-group">
                            <label>Valor a Pagar (R$) *</label>
                            <input type="text" id="valorEncomenda" placeholder="R$ 0,00" inputmode="numeric" required>

                        </div>
                        <div class="form-group">
                            <label>Data da Viagem *</label>
                            <input type="date" id="dataViagemEncomenda" required>
                        </div>
                        <div class="form-group">
                            <label>Status do Pagamento *</label>
                            <select id="statusPagamento" required>
                                <option value="PAGO">PAGO</option>
                                <option value="PENDENTE">PENDENTE</option>
                            </select>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button type="submit" class="btn">üíæ Salvar Encomenda</button>
                        <button type="button" class="btn btn-secondary" onclick="limparFormEncomenda()">üîÑ
                            Limpar</button>
                    </div>
                </form>
            </div>

            <div class="card">
                <h2>Lista de Encomendas</h2>
                <div class="filter-section">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Filtrar por Data</label>
                            <input type="date" id="filtroDataEncomenda" onchange="filtrarEncomendas()">
                        </div>
                        <div class="form-group">
                            <label>Filtrar por Local</label>
                            <select id="filtroLocalEncomenda" onchange="filtrarEncomendas()">
                                <option value="">Todos</option>
                                <option value="SACO">SACO</option>
                                <option value="POR√ÉO">POR√ÉO</option>
                                <option value="GELO">GELO/FRIGOR√çFICO</option>
                                <option value="Dest. Duplo">DESTINO DUPLO</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Ordem</th>
                                <th>Destinat√°rio</th>
                                <th>Remetente</th>
                                <th>Bilhete</th>
                                <th>Local</th>
                                <th>Esp√©cie</th>
                                <th>Volumes</th>
                                <th>Valor</th>
                                <th>Data</th>
                                <th>Pagamento</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="encomendasBody">
                            <tr>
                                <td colspan="11" style="text-align: center; color: var(--text-light);">Nenhuma encomenda
                                <td colspan="10" style="text-align: center; color: var(--text-light);">Nenhuma encomenda cadastrada</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- RELAT√ìRIOS -->
        <div id="relatorios" class="content-section">

            <!-- FILTRO -->
            <div class="card">
                <h2>Relat√≥rios Financeiros</h2>

                <div class="form-grid">
                    <div class="form-group">
                        <label>Data Inicial</label>
                        <input type="date" id="dataInicial">
                    </div>

                    <div class="form-group">
                        <label>Data Final</label>
                        <input type="date" id="dataFinal">
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn" onclick="gerarRelatorio()">üìä Gerar Relat√≥rio</button>
                </div>

                <p style="margin-top:20px; color: var(--text-light);">
                    Gere o relat√≥rio do per√≠odo desejado e visualize antes de baixar.
                </p>
            </div>

            <!-- RESULTADO DO RELAT√ìRIO -->
            <div class="card" id="relatorioResultado" style="display:none; margin-top:20px;">

                <h2>Resultado do Per√≠odo</h2>

                <div class="stats-grid">

                    <div class="stat-card">
                        <div class="stat-label">Receita Passagens</div>
                        <div class="stat-value" id="receitaPassagens">R$ 0,00</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-label">Receita Encomendas</div>
                        <div class="stat-value" id="receitaEncomendas">R$ 0,00</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-label">Comiss√£o Ag√™ncia</div>
                        <div class="stat-value" id="comissaoAgencia">R$ 0,00</div>
                        <small style="color: var(--text-light); font-size: 0.8rem;">
                            10% passagens + 30% encomendas
                        </small>
                    </div>

                    <div class="stat-card">
                        <div class="stat-label">Lucro L√≠quido</div>
                        <div class="stat-value" id="lucroRelatorio">R$ 0,00</div>
                    </div>

                </div>

            </div>

        </div>


    </div>

    <!-- MODAL VISUALIZA√á√ÉO PDF -->
    <div id="pdfModal" class="pdf-modal">
        <div class="pdf-content">
            <div class="pdf-header">
                <h3>Visualiza√ß√£o do Comprovante</h3>
                <div>
                    <button id="btnBaixarPdf" class="btn btn-small">üì• Baixar</button>
                    <button id="btnWhatsapp" class="btn btn-success">üì≤ Enviar no WhatsApp</button>
                    <button onclick="fecharModalPdf()" class="btn btn-small btn-danger">‚úñ</button>
                </div>
            </div>

            <iframe id="pdfPreview"></iframe>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <p>
                ¬© 2026 Ag√™ncia Lira ‚Ä¢ Desenvolvido por
                <span class="softplan">Softplan</span>
            </p>
        </div>
    </footer>


    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module" src="js/firebase.js"></script>
    <script type="module" src="js/script.js"></script>
</body>

</html>